<div class="limiter" style="display: block;" *ngIf="Type && ( Type === 'Create')">
  <div class="custom-modal modal-container">
    <div class="modal-close-btn" (click)="modalRef.hide();">
      <div class="close-icon">
        <span>
          <i class="fa fa-close" aria-hidden="true"></i>
        </span>
      </div>
    </div>
    <div class="content-area">
      <h1>Create Payment</h1>
      <div class="modal-content-body">
        <div class="content">
          <form [formGroup]="PaymentForm">
            <div class="col-sm-12">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Seller</mat-label>
                      <mat-select matInput formControlName="Seller" placeholder="Seller Name"
                        (ngModelChange)="SellerChanges($event)" required>
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Seller of SellerList; let i=index" [value]="Seller._id">
                          {{Seller.ContactName}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>person</mat-icon>
                      <mat-error class="mat-error-full margin-top0" [innerHTML]="GetFormControlErrorMessage('Seller')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Business</label>
                    <mat-select matInput formControlName="Business" placeholder="Business Name"
                      (ngModelChange)="BranchChanges($event)">
                      <mat-option>Select Business</mat-option>
                      <mat-option *ngFor="let Business of BusinessList; let i=index"
                        [value]="Business._id">{{Business.FirstName+' '+Business.LastName}}</mat-option>
                    </mat-select>
                    <mat-error class="mat-error-full margin-top0" [innerHTML]="GetFormControlErrorMessage('Business')">
                    </mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Business</mat-label>
                      <mat-select matInput formControlName="Business" placeholder="Business Name"
                        (ngModelChange)="BranchChanges($event)">
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Business of BusinessList; let i=index" [value]="Business._id">
                          {{Business.FirstName+' '+Business.LastName}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>business_center</mat-icon>
                      <mat-error class="mat-error-full margin-top0"
                        [innerHTML]="GetFormControlErrorMessage('Business')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Payment Mode</label>
                    <mat-select matInput formControlName="PaymentMode" placeholder="Payment Mode">
                      <mat-option>Select Payment Mode </mat-option>
                      <mat-option *ngFor="let Payment of PaymentModes; let i=index"
                        [value]="Payment.Key">{{Payment.Name}}</mat-option>
                    </mat-select>
                    <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentMode')">
                    </mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Payment Mode</mat-label>
                      <mat-select matInput formControlName="PaymentMode" placeholder="Payment Mode" required>
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Payment of PaymentModes; let i=index" [value]="Payment.Key">
                          {{Payment.Name}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>credit_card</mat-icon>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentMode')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Payment Date</label>
                    <input matInput formControlName="PaymentDate" placeholder="PaymentDate" (click)="PaymentDate.open()"
                      [matDatepicker]="PaymentDate" (keypress)="NotAllow()" (keydown)="ClearInput($event)">
                    <mat-icon class="PaymentDate" matSuffix>event</mat-icon>
                    <mat-datepicker touchUi #PaymentDate></mat-datepicker>
                    <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentDate')"></mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Payment Date</mat-label>
                      <input matInput formControlName="PaymentDate" placeholder="MM/DD/YYYY"
                        (click)="PaymentDate.open()" [matDatepicker]="PaymentDate" (keypress)="NotAllow()"
                        (keydown)="ClearInput($event)">
                      <mat-icon class="PaymentDate" matSuffix>event</mat-icon>
                      <mat-datepicker touchUi #PaymentDate></mat-datepicker>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentDate')"></mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Remarks</label>
                    <input matInput formControlName="Remarks" placeholder="Remarks" maxlength="350">
                    <mat-error [innerHTML]="GetFormControlErrorMessage('Remarks')"></mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Remarks</mat-label>
                      <input matInput #message formControlName="Remarks" placeholder="Remarks" maxlength="350">
                      <mat-icon matSuffix>notes</mat-icon>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('Remarks')"></mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="content-table">
                <div class="">
                  <div class="container-fluid">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="table table-hover table-bordered table-responsive tbl-shadow">
                          <table class="table data-tbl">
                            <thead>
                              <tr>
                                <th scope="col">Invoice No</th>
                                <th scope="col">Date</th>
                                <th scope="col">Invoice Amount</th>
                                <th scope="col">Paid Amount</th>
                                <th scope="col">Remaining Amount</th>
                                <th scope="col">Accept</th>
                                <th scope="col">Pay To Invoice</th>
                              </tr>
                            </thead>
                            <tbody>
                              <ng-container *ngIf="BuyerAcceptList.length > 0" formArrayName="InvoiceDetails">
                                <tr class="odd" *ngFor="let FControl of getFArray().controls;let i=index"
                                  [formGroupName]="i">
                                  <td>{{FControl.get('InvoiceNumber').value}}</td>
                                  <td>{{FControl.get('InvoiceDate').value | date:'MMM d, y' }} </td>
                                  <td>{{FControl.get('InvoiceAmount').value }}</td>
                                  <td>{{FControl.get('PaidAmount').value }}</td>
                                  <td>{{FControl.get('RemainingAmount').value }}</td>
                                  <td>
                                    <mat-checkbox formControlName="InvoiceAcceptAndCancel"> </mat-checkbox>
                                  </td>
                                  <td>
                                    <!-- <input matInput type="number" class="payfield" formControlName="PayToInvoiceAmount"
                                      placeholder="Pay To Amount" (ngModelChange)="PaidORUnpaid(FControl, $event)"> -->
                                    <mat-form-field appearance="outline" class="example-pay">
                                      <mat-label>Pay</mat-label>
                                      <input matInput type="number" class="payfield"
                                        formControlName="PayToInvoiceAmount" placeholder="Pay To Amount"
                                        (ngModelChange)="PaidORUnpaid(FControl, $event)">
                                      <mat-icon matSuffix>currency_rupee</mat-icon>
                                    </mat-form-field>
                                  </td>

                                </tr>
                              </ng-container>
                              <tr class="no-records" *ngIf="BuyerAcceptList.length === 0">
                                <td colspan="10"> No Records Found.... </td>
                              </tr>
                            </tbody>
                          </table>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-6" style="margin-top: 30px;">
                  <ng-container formArrayName="PaymentAttachments">
                    <div class="row">
                      <div class="col-md-12 ">
                        <div *ngFor="let fileName of GetFormArray('PaymentAttachments'); let i=index"
                          [formGroupName]="i" class="col-md-12">
                          <div class="form-group">
                            <div class="row">
                              <div class="col-md-10">
                                <ng-container>
                                  <input #fileInput type='file' formControlName="fileName"
                                    (change)="onFileChange($event, i)" style="display:none;"
                                    accept=".PNG, .png, JPEG, .jpeg, JPG, .jpg, .GIF, .gif">
                                  <ng-container *ngIf="!ReadonlyPage && !PaymentDetailsDisabled">
                                    <span class="UploadBtn"
                                      [ngClass]="{'Uploaded': fileName.get('PaymentPreviewAvailable').value === true}"
                                      (click)="fileInput.click()">
                                      <i class="material-icons"> cloud_upload </i>
                                      <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"> Change
                                        Payment File </span>
                                      <span *ngIf="!fileName.get('PaymentPreviewAvailable').value === true"> Upload
                                        Payment File </span>
                                    </span>
                                    <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"
                                      class="UploadViewBtn" (click)="fileName.get('ShowPaymentFiles').value = true">
                                      View Payment File </span>
                                  </ng-container>
                                  <ng-container *ngIf="ReadonlyPage || PaymentDetailsDisabled">
                                    <span class="UploadBtn"
                                      [ngClass]="{'Uploaded': fileName.get('PaymentPreviewAvailable').value === true}"
                                      (click)="fileName.get('ShowPaymentFiles').value = true">
                                      <i class="material-icons"> photo_size_select_actual </i>
                                      <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"> View Payment
                                        File </span>
                                      <span *ngIf="!fileName.get('PaymentPreviewAvailable').value === true"> No Payment
                                        File </span>
                                    </span>
                                  </ng-container>
                                </ng-container>
                              </div>
                              <div class="col-md-2">
                                <span class="btn-remove-minus" (click)="RemovePayment(i)"><i
                                    class="fa fa-minus"></i></span>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="fileName.get('ShowPaymentFiles').value" class="ECGView">
                            <span class="CloseBtn" (click)="fileName.get('ShowPaymentFiles').value = false"> x </span>
                            <div class="ImgSection">
                              <img [ngStyle]="{'max-height': screenHeight + 'px', 'max-width': screenWidth + 'px' }"
                                src="{{fileName.get('PaymentPreview').value}}" alt="">
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
                <div class="col-md-4">
                  <div class="ADDBusiness">
                    <button class="add-invoice-image" (click)="AddPayment()">
                      Add Images
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="login-button btn-blue min-wth-200">
              <span (click)="Submit()">Submit</span>
            </div> -->
            <button mat-fab extended class="pay-btn" color="primary" (click)="Submit()">
              <mat-icon>done</mat-icon>
              Submit
            </button>
          </form>

        </div>
      </div>
    </div>
    <div class="modal-footer">
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" class="bk-waves-yellow" data-name="Layer 1"
      viewBox="0 0 1920 80.97">
      <defs>
        <style>
          .cls-1 {
            fill: #f2940c;
          }

          .cls-2 {
            fill: #efaa0f;
          }

          .cls-3 {
            fill: #e58910;
          }
        </style>
      </defs>
      <title>web bg images</title>
      <path class="cls-1" d="M0,26.27q8.58-1.56,17-3-8.43,1.9-17,4Z"></path>
      <path class="cls-2"
        d="M1920,26.27V81H0V26.27q13-2.36,25.59-4.39C211.19,59,361.59,64.1,465.42,61.8c36.44-.81,68.89-2.57,98.36-4.92C731,43.52,802.22,10.9,960,23.16c17.07,1.32,35.15,3.17,54.48,5.63,119.59,15.21,185.88,40.8,321,30,7.32-.59,14.21-1.23,20.71-1.92,101.7-10.79,110-33.76,237.32-46.09C1631.11,7.15,1745.7-2,1894.41,21.88Q1907,23.92,1920,26.27Z">
      </path>
      <path class="cls-1"
        d="M1920,16.61V81H0V26.27q13-2.36,25.59-4.39C174.3-2,288.89,7.15,326.46,10.79c127.33,12.33,135.62,35.3,237.32,46.09,6.5.69,13.39,1.33,20.71,1.92,135.15,10.79,201.44-14.8,321-30,19.33-2.46,37.41-4.31,54.48-5.63,157.78-12.26,229,20.36,396.22,33.72,29.47,2.35,61.92,4.11,98.36,4.92,103.83,2.3,254.23-2.79,439.83-39.92Q1907.1,19.35,1920,16.61Z">
      </path>
      <path class="cls-3"
        d="M905.52,28.79c18.66-2.37,36.16-4.18,52.7-5.49-16.54,1.76-34,4.19-52.7,7.39-119.59,20.49-185.88,55-321,40.42-7.32-.79-14.21-1.66-20.71-2.58C490.87,58.11,466,39.26,410.79,23.3c55.18,11.85,80.08,25.84,153,33.58,6.5.69,13.39,1.33,20.71,1.92C719.64,69.59,785.93,44,905.52,28.79Z">
      </path>
      <path class="cls-3"
        d="M1887.31,23.29C1705,71.56,1557.08,78.21,1454.58,75.15c-36.44-1.09-68.89-3.46-98.36-6.62-112.67-12.13-181.75-36-263.08-45.27,81.33,6.88,150.41,24.62,263.08,33.62,29.47,2.35,61.92,4.11,98.36,4.92C1557.08,64.07,1705,59.14,1887.31,23.29Z">
      </path>
      <path class="cls-2"
        d="M326.46,6.45C362.5,11.15,389,17,410.79,23.3c-21.78-4.68-48.29-9-84.33-12.51C288.89,7.15,174.3-2,25.59,21.88q-4.28.69-8.58,1.42c2.87-.66,5.73-1.29,8.58-1.91C174.3-10.79,288.89,1.55,326.46,6.45Z">
      </path>
      <path class="cls-1"
        d="M1093.14,23.26c-39.39-3.32-81.66-4.1-133.14-.1l-1.78.14,1.78-.19C1011.48,17.72,1053.75,18.77,1093.14,23.26Z">
      </path>
      <path class="cls-1" d="M1920,14.29v2.32q-12.9,2.75-25.59,5.27l-7.1,1.41,7.1-1.9Q1907.1,18,1920,14.29Z">
      </path>
    </svg>
  </div>
</div>

<section *ngIf="Type && ( Type === 'View')">
  <div class="limiter" style="display: block;">
    <div class="custom-modal modal-container">
      <form class="form-horizontal">
        <div class="modal-close-btn" (click)="modalRefView.hide();">
          <div class="close-icon">
            <span>
              <i class="fa fa-close" aria-hidden="true"></i>
            </span>
          </div>
        </div>
        <div class="content-area">
          <h1>Payment Details</h1>
          <div class="modal-content-body">
            <div class="content">
              <div class="col-sm-12">
                <div class="row no-margin">

                  <!-- <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Seller Name:</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.Seller?.ContactName | titlecase}}
                      </div>
                    </div>
                  </div> -->
                  <h2 class="pay-id">{{PaymentDetails?.PaymentID}}</h2>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Seller Business Name
                        :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.Business?.FirstName+' '+ PaymentDetails?.Business?.LastName | titlecase}}
                      </div>
                    </div>
                  </div>

                  <!-- <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Buyer Name
                        :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.buyer?.ContactName | titlecase}}
                      </div>
                    </div>
                  </div> -->
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Buyer Business Name
                        :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.BuyerBusiness?.FirstName+ ' '+PaymentDetails?.BuyerBusiness?.LastName |
                        titlecase}}
                      </div>
                    </div>
                  </div>

                  <!-- <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment ID:</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.PaymentID}}
                      </div>
                    </div>
                  </div> -->
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment Amount
                        :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.PaidAmount }}
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment Description :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.Remarks }}
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Due Date:</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.createdAt | date: 'd-MMM-y'}}
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment Date :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.PaymentDate | date: 'd-MMM-y'}}
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment Status :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.Payment_Status }}
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-group-sm col-md-12">
                    <div class="row">
                      <label class="col-sm-12 col-md-4 col-form-label text-lg-right lbl">Payment Mode :</label>
                      <div class="col-sm-12 col-md-8" style="margin: auto;">
                        {{PaymentDetails?.PaymentMode }}
                      </div>
                    </div>
                  </div>

                  <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Invoice Number</th>
                        <th scope="col">Invoice Date</th>
                        <th scope="col">Invoice Amount</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let payments of PaymentDetails.InvoiceDetails">
                        <th>{{payments.InvoiceNumber}}</th>
                        <td>{{payments.InvoiceDate | date: 'd-MMM-y'}}</td>
                        <td>₹ {{payments.InProgressAmount}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

      </form>
      <div class="modal-footer">
        <!-- <button  class="btn-blue" aria-label="">
          <span>Close</span>
          <span> <i class="fa fa-times" aria-hidden="true"></i> </span>

        </button> -->
        <button mat-fab extended color="warn" type="submit" (click)="modalRefView.hide()">
          <mat-icon>close</mat-icon>
          Close
        </button>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" class="bk-waves-yellow" data-name="Layer 1"
        viewBox="0 0 1920 80.97">
        <defs>
          <style>
            .cls-1 {
              fill: #f2940c;
            }

            .cls-2 {
              fill: #efaa0f;
            }

            .cls-3 {
              fill: #e58910;
            }
          </style>
        </defs>
        <title>web bg images</title>
        <path class="cls-1" d="M0,26.27q8.58-1.56,17-3-8.43,1.9-17,4Z"></path>
        <path class="cls-2"
          d="M1920,26.27V81H0V26.27q13-2.36,25.59-4.39C211.19,59,361.59,64.1,465.42,61.8c36.44-.81,68.89-2.57,98.36-4.92C731,43.52,802.22,10.9,960,23.16c17.07,1.32,35.15,3.17,54.48,5.63,119.59,15.21,185.88,40.8,321,30,7.32-.59,14.21-1.23,20.71-1.92,101.7-10.79,110-33.76,237.32-46.09C1631.11,7.15,1745.7-2,1894.41,21.88Q1907,23.92,1920,26.27Z">
        </path>
        <path class="cls-1"
          d="M1920,16.61V81H0V26.27q13-2.36,25.59-4.39C174.3-2,288.89,7.15,326.46,10.79c127.33,12.33,135.62,35.3,237.32,46.09,6.5.69,13.39,1.33,20.71,1.92,135.15,10.79,201.44-14.8,321-30,19.33-2.46,37.41-4.31,54.48-5.63,157.78-12.26,229,20.36,396.22,33.72,29.47,2.35,61.92,4.11,98.36,4.92,103.83,2.3,254.23-2.79,439.83-39.92Q1907.1,19.35,1920,16.61Z">
        </path>
        <path class="cls-3"
          d="M905.52,28.79c18.66-2.37,36.16-4.18,52.7-5.49-16.54,1.76-34,4.19-52.7,7.39-119.59,20.49-185.88,55-321,40.42-7.32-.79-14.21-1.66-20.71-2.58C490.87,58.11,466,39.26,410.79,23.3c55.18,11.85,80.08,25.84,153,33.58,6.5.69,13.39,1.33,20.71,1.92C719.64,69.59,785.93,44,905.52,28.79Z">
        </path>
        <path class="cls-3"
          d="M1887.31,23.29C1705,71.56,1557.08,78.21,1454.58,75.15c-36.44-1.09-68.89-3.46-98.36-6.62-112.67-12.13-181.75-36-263.08-45.27,81.33,6.88,150.41,24.62,263.08,33.62,29.47,2.35,61.92,4.11,98.36,4.92C1557.08,64.07,1705,59.14,1887.31,23.29Z">
        </path>
        <path class="cls-2"
          d="M326.46,6.45C362.5,11.15,389,17,410.79,23.3c-21.78-4.68-48.29-9-84.33-12.51C288.89,7.15,174.3-2,25.59,21.88q-4.28.69-8.58,1.42c2.87-.66,5.73-1.29,8.58-1.91C174.3-10.79,288.89,1.55,326.46,6.45Z">
        </path>
        <path class="cls-1"
          d="M1093.14,23.26c-39.39-3.32-81.66-4.1-133.14-.1l-1.78.14,1.78-.19C1011.48,17.72,1053.75,18.77,1093.14,23.26Z">
        </path>
        <path class="cls-1" d="M1920,14.29v2.32q-12.9,2.75-25.59,5.27l-7.1,1.41,7.1-1.9Q1907.1,18,1920,14.29Z">
        </path>
      </svg>
    </div>
  </div>
</section>


<div class="limiter" style="display: block;" *ngIf="Type && ( Type === 'Update')">
  <div class="custom-modal modal-container">
    <div class="modal-close-btn" (click)="modalRef.hide();">
      <div class="close-icon">
        <span>
          <i class="fa fa-close" aria-hidden="true"></i>
        </span>
      </div>
    </div>
    <div class="content-area">
      <h1>Edit Payment</h1>
      <div class="modal-content-body">
        <div class="content">
          <form [formGroup]="PaymentForm">
            <div class="col-sm-12">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Seller</label>
                    <mat-select matInput formControlName="Seller" placeholder="Seller Name"
                      (ngModelChange)="SellerChanges($event)">
                      <mat-option>Select Seller</mat-option>
                      <mat-option *ngFor="let Seller of SellerList; let i=index"
                        [value]="Seller._id">{{Seller.ContactName}}</mat-option>
                    </mat-select>
                    <mat-error class="mat-error-full margin- top0" [innerHTML]="GetFormControlErrorMessage('Seller')">
                    </mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Seller</mat-label>
                      <mat-select matInput formControlName="Seller" placeholder="Seller Name"
                        (ngModelChange)="SellerChanges($event)" required>
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Seller of SellerList; let i=index" [value]="Seller._id">
                          {{Seller.ContactName}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>person</mat-icon>
                      <mat-error class="mat-error-full margin- top0" [innerHTML]="GetFormControlErrorMessage('Seller')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Business</label>
                    <mat-select matInput formControlName="Business" placeholder="Business Name"
                      (ngModelChange)="BusinessChanges($event)">
                      <mat-option>Select Business</mat-option>
                      <mat-option *ngFor="let Business of BusinessList; let i=index"
                        [value]="Business._id">{{Business.FirstName+' '+Business.LastName}}</mat-option>
                    </mat-select>
                    <mat-error class="mat-error-full margin-top0" [innerHTML]="GetFormControlErrorMessage('Business')">
                    </mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Business</mat-label>
                      <mat-select matInput formControlName="Business" placeholder="Business Name"
                        (ngModelChange)="BusinessChanges($event)" required>
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Business of BusinessList; let i=index" [value]="Business._id">
                          {{Business.FirstName+' '+Business.LastName}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>business_center</mat-icon>
                      <mat-error class="mat-error-full margin-top0"
                        [innerHTML]="GetFormControlErrorMessage('Business')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <!-- <div class="col-md-6">
                  <div class="form-group">
                    <label>Branch</label>
                    <mat-select matInput formControlName="Branch" placeholder="Branch Name"
                      (ngModelChange)="BranchChanges($event)">
                      <mat-option>Select Branch</mat-option>
                      <mat-option *ngFor="let Branch of BranchList; let i=index"
                        [value]="Branch._id">{{Branch.BranchName}}</mat-option>
                    </mat-select>
                    <mat-error class="mat-error-full margin-top0" [innerHTML]="GetFormControlErrorMessage('Branch')">
                    </mat-error>
                  </div>
                </div> -->
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Payment Mode</label>
                    <mat-select matInput formControlName="PaymentMode" placeholder="Payment Mode">
                      <mat-option>Select Payment Mode </mat-option>
                      <mat-option *ngFor="let Payment of PaymentModes; let i=index"
                        [value]="Payment.Key">{{Payment.Name}}</mat-option>
                    </mat-select>
                    <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentMode')">
                    </mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Payment Mode</mat-label>
                      <mat-select matInput formControlName="PaymentMode" placeholder="Payment Mode" required>
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Payment of PaymentModes; let i=index" [value]="Payment.Key">
                          {{Payment.Name}}
                        </mat-option>
                      </mat-select>
                      <mat-icon matSuffix>credit_card</mat-icon>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentMode')">
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <!-- <label>Payment Date</label>
                    <input matInput formControlName="PaymentDate" placeholder="PaymentDate" (click)="PaymentDate.open()"
                      [matDatepicker]="PaymentDate" (keypress)="NotAllow()" (keydown)="ClearInput($event)">
                    <mat-icon class="PaymentDate" matSuffix>event</mat-icon>
                    <mat-datepicker touchUi #PaymentDate></mat-datepicker>
                    <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentDate')"></mat-error> -->
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Payment Date</mat-label>
                      <input matInput formControlName="PaymentDate" placeholder="MM/DD/YYYY"
                        (click)="PaymentDate.open()" [matDatepicker]="PaymentDate" (keypress)="NotAllow()"
                        (keydown)="ClearInput($event)">
                      <mat-icon class="PaymentDate" matSuffix>event</mat-icon>
                      <mat-datepicker touchUi #PaymentDate></mat-datepicker>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('PaymentDate')"></mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <mat-form-field appearance="outline" class="example-full-width">
                      <mat-label>Remarks</mat-label>
                      <input matInput #message formControlName="Remarks" placeholder="Remarks" maxlength="350">
                      <mat-icon matSuffix>notes</mat-icon>
                      <mat-error [innerHTML]="GetFormControlErrorMessage('Remarks')"></mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="content-wrapper">
                <div class="default-container">
                  <div class="table-responsive tbl-shadow">
                    <table class="table data-tbl">
                      <thead>
                        <tr>
                          <th scope="col">Invoice No</th>
                          <th scope="col">Date</th>
                          <th scope="col">Invoice Amount</th>
                          <th scope="col">Paid Amount</th>
                          <th scope="col">Remaining Amount</th>
                          <th scope="col">Accept</th>
                          <th scope="col">Pay To Invoice</th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="PayToInvoiceAmountDetails !== null || PayToInvoiceAmountDetails?.InvoiceDetails?.length !== undefined"
                          formArrayName="InvoiceDetails">
                          <tr class="odd" *ngFor="let FControl of getFArray().controls;let i=index" [formGroupName]="i">
                            <td>{{FControl.get('InvoiceNumber').value}}</td>
                            <td>{{FControl.get('InvoiceDate').value | date: 'd-MMM-y'}}</td>
                            <td>{{FControl.get('InvoiceAmount').value }}</td>
                            <td>{{FControl.get('InProgressAmount').value }}</td>
                            <td>{{FControl.get('RemainingAmount').value }}</td>
                            <td>
                              <mat-checkbox formControlName="InvoiceAcceptAndCancel"> </mat-checkbox>
                            </td>
                            <td>
                              <!-- <input matInput type="number" class="payfield" formControlName="PayToInvoiceAmount"
                                placeholder="Pay To Amount" (ngModelChange)="EditPaidORUnpaid(FControl, $event)"
                                (change)="trackPayment($event)"> -->
                              <mat-form-field appearance="outline" class="example-pay">
                                <mat-label>Pay</mat-label>
                                <input matInput type="number" class="payfield" formControlName="PayToInvoiceAmount"
                                  placeholder="Pay To Amount" (ngModelChange)="EditPaidORUnpaid(FControl, $event)"
                                  (change)="trackPayment($event)">
                                <mat-icon matSuffix>currency_rupee</mat-icon>
                              </mat-form-field>
                            </td>

                          </tr>
                        </ng-container>
                        <tr class="no-records"
                          *ngIf="PayToInvoiceAmountDetails === null || PayToInvoiceAmountDetails === undefined">
                          <td colspan="10"> No Records Found.... </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-2"></div>
                <div class="col-md-6" style="margin-top: 30px;">
                  <ng-container formArrayName="PaymentAttachments">
                    <div class="row">
                      <div class="col-md-12 ">
                        <div *ngFor="let fileName of GetFormArray('PaymentAttachments'); let i=index"
                          [formGroupName]="i" class="col-md-12">
                          <div class="form-group">
                            <div class="row">
                              <div class="col-md-10">
                                <ng-container>
                                  <input #fileInput type='file' formControlName="fileName"
                                    (change)="onFileChange($event, i)" style="display:none;"
                                    accept=".PNG, .png, JPEG, .jpeg, JPG, .jpg, .GIF, .gif">
                                  <ng-container *ngIf="!ReadonlyPage && !PaymentDetailsDisabled">
                                    <span class="UploadBtn"
                                      [ngClass]="{'Uploaded': fileName.get('PaymentPreviewAvailable').value === true}"
                                      (click)="fileInput.click()">
                                      <i class="material-icons"> cloud_upload </i>
                                      <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"> Change
                                        Payment File </span>
                                      <span *ngIf="!fileName.get('PaymentPreviewAvailable').value === true"> Upload
                                        Payment File </span>
                                    </span>
                                    <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"
                                      class="UploadViewBtn" (click)="fileName.get('ShowPaymentFiles').value = true">
                                      View Payment File </span>
                                  </ng-container>
                                  <ng-container *ngIf="ReadonlyPage || PaymentDetailsDisabled">
                                    <span class="UploadBtn"
                                      [ngClass]="{'Uploaded': fileName.get('PaymentPreviewAvailable').value === true}"
                                      (click)="fileName.get('ShowPaymentFiles').value = true">
                                      <i class="material-icons"> photo_size_select_actual </i>
                                      <span *ngIf="fileName.get('PaymentPreviewAvailable').value === true"> View Payment
                                        File </span>
                                      <span *ngIf="!fileName.get('PaymentPreviewAvailable').value === true"> No Payment
                                        File </span>
                                    </span>
                                  </ng-container>
                                </ng-container>
                              </div>
                              <div class="col-md-2">
                                <span class="btn-remove-minus" (click)="RemovePayment(i)"><i
                                    class="fa fa-minus"></i></span>
                              </div>
                            </div>
                          </div>
                          <div *ngIf="fileName.get('ShowPaymentFiles').value" class="ECGView">
                            <span class="CloseBtn" (click)="fileName.get('ShowPaymentFiles').value = false"> x </span>
                            <div class="ImgSection">
                              <img [ngStyle]="{'max-height': screenHeight + 'px', 'max-width': screenWidth + 'px' }"
                                src="{{fileName.get('PaymentPreview').value}}" alt="">
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
                <div class="col-md-4">
                  <div class="ADDBusiness">
                    <button class="add-invoice-image" (click)="AddPayment()">
                      Add Images
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="login-button btn-blue min-wth-200">
              <span (click)="Update()">Update</span>
            </div> -->
            <button mat-fab extended color="primary" class="pay-btn" (click)="Update()">
              <mat-icon>done</mat-icon>
              Update
            </button>
          </form>

        </div>
      </div>
    </div>
    <div class="modal-footer">
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" class="bk-waves-yellow" data-name="Layer 1"
      viewBox="0 0 1920 80.97">
      <defs>
        <style>
          .cls-1 {
            fill: #f2940c;
          }

          .cls-2 {
            fill: #efaa0f;
          }

          .cls-3 {
            fill: #e58910;
          }
        </style>
      </defs>
      <title>web bg images</title>
      <path class="cls-1" d="M0,26.27q8.58-1.56,17-3-8.43,1.9-17,4Z"></path>
      <path class="cls-2"
        d="M1920,26.27V81H0V26.27q13-2.36,25.59-4.39C211.19,59,361.59,64.1,465.42,61.8c36.44-.81,68.89-2.57,98.36-4.92C731,43.52,802.22,10.9,960,23.16c17.07,1.32,35.15,3.17,54.48,5.63,119.59,15.21,185.88,40.8,321,30,7.32-.59,14.21-1.23,20.71-1.92,101.7-10.79,110-33.76,237.32-46.09C1631.11,7.15,1745.7-2,1894.41,21.88Q1907,23.92,1920,26.27Z">
      </path>
      <path class="cls-1"
        d="M1920,16.61V81H0V26.27q13-2.36,25.59-4.39C174.3-2,288.89,7.15,326.46,10.79c127.33,12.33,135.62,35.3,237.32,46.09,6.5.69,13.39,1.33,20.71,1.92,135.15,10.79,201.44-14.8,321-30,19.33-2.46,37.41-4.31,54.48-5.63,157.78-12.26,229,20.36,396.22,33.72,29.47,2.35,61.92,4.11,98.36,4.92,103.83,2.3,254.23-2.79,439.83-39.92Q1907.1,19.35,1920,16.61Z">
      </path>
      <path class="cls-3"
        d="M905.52,28.79c18.66-2.37,36.16-4.18,52.7-5.49-16.54,1.76-34,4.19-52.7,7.39-119.59,20.49-185.88,55-321,40.42-7.32-.79-14.21-1.66-20.71-2.58C490.87,58.11,466,39.26,410.79,23.3c55.18,11.85,80.08,25.84,153,33.58,6.5.69,13.39,1.33,20.71,1.92C719.64,69.59,785.93,44,905.52,28.79Z">
      </path>
      <path class="cls-3"
        d="M1887.31,23.29C1705,71.56,1557.08,78.21,1454.58,75.15c-36.44-1.09-68.89-3.46-98.36-6.62-112.67-12.13-181.75-36-263.08-45.27,81.33,6.88,150.41,24.62,263.08,33.62,29.47,2.35,61.92,4.11,98.36,4.92C1557.08,64.07,1705,59.14,1887.31,23.29Z">
      </path>
      <path class="cls-2"
        d="M326.46,6.45C362.5,11.15,389,17,410.79,23.3c-21.78-4.68-48.29-9-84.33-12.51C288.89,7.15,174.3-2,25.59,21.88q-4.28.69-8.58,1.42c2.87-.66,5.73-1.29,8.58-1.91C174.3-10.79,288.89,1.55,326.46,6.45Z">
      </path>
      <path class="cls-1"
        d="M1093.14,23.26c-39.39-3.32-81.66-4.1-133.14-.1l-1.78.14,1.78-.19C1011.48,17.72,1053.75,18.77,1093.14,23.26Z">
      </path>
      <path class="cls-1" d="M1920,14.29v2.32q-12.9,2.75-25.59,5.27l-7.1,1.41,7.1-1.9Q1907.1,18,1920,14.29Z">
      </path>
    </svg>
  </div>
</div>